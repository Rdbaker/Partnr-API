<toasts></toasts>
<div class="content-container" ng-if="isMember">
  <button class="btn btn-primary" ng-if="isOwner" ng-click="$state.go('project_edit', {'project_id' : project.id})">Edit</button>
  <button class="btn btn-default" ng-click="$state.go('application_list', {'project_id' : project.id})">View Applications</button>
  <button class="btn btn-default" ng-click="$state.go('project_conversation', {'project_id' : project.id})">Messages</button>
</div>
<div class="content-container" ng-show="loadComplete">
	<h2>{{ project.title }}</h2>
  <span>{{ getStatus() }}</span>
  <h3>Description</h3>
  <p>{{project.description}}</p>
  <h3>Roles</h3>
  <div class="clearfix">
    <div class="col-md-3" ng-repeat="role in project.roles">
      <div class="internal-container">
      	<span class="title">{{role.title}}</span>
      	<span class="subtitle" ng-show="role.user">{{role.user.first_name}} {{role.user.last_name}}</span><span class="subtitle" ng-hide="role.user"><em>None</em></span>
        <div class="buttons-right">
        	<button type="button" class="btn btn-primary" ng-if="!role.user && canApply" ng-click="doApply(role.id)">Apply</button>
        </div>
      </div>
    </div>
  </div>
  <h3>Comments</h3>
  <div>
    <div class="internal-container comment" ng-repeat="comment in project.comments">
      <span class="c-header"><strong>{{ comment.user.name }}</strong> on {{ comment.created_at | date: 'mediumDate' }}:</span>
      <p>{{ comment.content }}</p>
      <button class="btn btn-danger" ng-if="isOwner || comment.user.id === principal.getUser().id" ng-click="deleteComment(comment)">Delete</button>
    </div>
    <div class="form-group">
      <textarea name="new-comment" class="form-control" ng-model="newComment.content" ng-disabled="isCommentSubmitting" /></textarea>
      <button class="btn btn-primary" ng-click="addComment()" ng-disabled="isCommentSubmitting">Post</button>
    </div>
  </div>
</div>
<div ng-hide="loadComplete" class="content-container">
  <div class="text-center loading">
    <img src="/assets/ajax-loader.gif">
  </div>
</div>